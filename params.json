{
  "name": "Content-mapping",
  "tagline": "Mini framework for mapping content from a source to a destination system, e.g. from Propel objects to Solr or from Doctrine entities to ElasticSearch.",
  "body": "content-mapping\r\n===============\r\n\r\n[![Build Status](https://travis-ci.org/h69/content-mapping.svg?branch=master)](https://travis-ci.org/h69/content-mapping)\r\n[![Coverage Status](https://coveralls.io/repos/github/h69/content-mapping/badge.svg?branch=master)](https://coveralls.io/github/h69/content-mapping?branch=master)\r\n\r\ncontent-mapping is a mini framework for mapping content from a source to a destination system. E.g. from Propel objects to Solr, from Doctrine entities to ElasticSearch or from one XML structure to another. It features interfaces to guide you on your mapping way and ships with some abstract implementation helpers or magic implementations.\r\n\r\nATTENTION! This repository is a fork of [webfactory/content-mapping] (https://github.com/webfactory/content-mapping) that aims to have only one type of adapter (instead of source- and destination-adapter) with the ability to also handle indexing instead of synchronizing. The difference between indexing and synchronizing is that indexing returns a queue of items that have been created, updated or deleted instead of returning all items ordered by their id.\r\n\r\n\r\nInstallation\r\n------------\r\n\r\nAdd this long-time fork of content-mapping as dependency by running the command (see http://getcomposer.org/):\r\n\r\n    php composer.phar require h69/content-mapping\r\n\r\nand run\r\n\r\n    php composer.phar install\r\n\r\nConcept\r\n-------\r\n\r\n![Class diagram](https://raw.githubusercontent.com/h69/content-mapping/master/doc/class-diagram.png)\r\n\r\nThe content-mapping process is based on four parts: the ``Synchronizer`` or ``Indexer``, which needs a ``SourceAdapter``, ``DestinationAdapter`` and a ``Callback Function`` to map the source structure to destination structure.\r\n\r\n**Synchronizer**\r\nThe entry point is ``Synchronizer->synchronize()``: there, the process gets an Iterator from the ``SourceAdapter->getObjectsOrderedById()`` as well as an Iterator from the ``DestinationAdapter->getObjectsOrderedById()``, and compares the objects in each one. During the comparison (Synchronizer), it deletes outdated objects (``DestinationAdapter->delete()``), stores new objects (``DestinationAdapter->createObject()``) and updates existing objects in the destination system (``Callback Function``).\r\n\r\n**Indexer**\r\nThe entry point is ``Indexer->index()``: there, the process gets an Iterator from the ``SourceAdapter->getObjectsOrderedById()`` and reads the status of each object (``SourceAdapter->statusOf()``). During the indexing, the returned status of the object defines whether the object will be created (``DestinationAdapter->createObject()``), updated (``Callback Function``) or deleted (``DestinationAdapter->delete()``).\r\n\r\n**Hooks**\r\n ``DestinationAdapter->updated()`` and ``DestinationAdapter->commit()`` are only hooks for external change tracking, to say an object has been updated or both Iterators have been processed, i.e. changes can be persisted.\r\n\r\nUsage\r\n-----\r\n\r\nTo construct a ``Synchronizer``, you need two implementations for the ``Adapter`` (source and destination) and a callback to map properties from source to destination object. Please find abstract templates and ready-to-use generic implementations of Adapters in the [h69/content-mapping\\-\\*](https://github.com/search?q=h69%2Fcontent-mapping) or adapt one of [webfactory/content-mapping\\-\\*](https://github.com/search?q=webfactory%2Fcontent-mapping) to work with the updated interface of this fork. The Mapper usually is very specific for your project, so you probably want to implement it in your application.\r\n\r\n```php\r\nuse H69\\ContentMapping\\Synchronizer;\r\nuse H69\\ContentMapping\\Mapper\\Result;\r\n\r\n$sourceAdapter = ...; // see the readme of the corresponding package on how to construct it\r\n$destinationAdapter = ...; // see the readme of the corresponding package on how to construct it\r\n$typeToSynchronize = 'pages';\r\n\r\n$synchronizer = new Synchronizer($sourceAdapter, $destinationAdapter);\r\n$synchronizer->synchronize($typeToSynchronize, function($objectA, $objectB){\r\n    ...\r\n    //return Result::unchanged();\r\n    return Result::changed($updatedObjectB);\r\n});\r\n```\r\n\r\nTo construct a ``Indexer``, you need two implementations for the ``Adapter`` (source and destination) and a callback to map properties from source to destination object. Please find abstract templates and ready-to-use generic implementations of Adapters in the [h69/content-mapping\\-\\*](https://github.com/search?q=h69%2Fcontent-mapping) or adapt one of [webfactory/content-mapping\\-\\*](https://github.com/search?q=webfactory%2Fcontent-mapping) to work with the updated interface of this fork. The Mapper usually is very specific for your project, so you probably want to implement it in your application.\r\n\r\n```php\r\nuse H69\\ContentMapping\\Indexer;\r\nuse H69\\ContentMapping\\Mapper\\Result;\r\n\r\n$sourceAdapter = ...; // see the readme of the corresponding package on how to construct it\r\n$destinationAdapter = ...; // see the readme of the corresponding package on how to construct it\r\n$typeToIndex = 'pages';\r\n\r\n$indexer = new Indexer($sourceAdapter, $destinationAdapter);\r\n$indexer->index($typeToSynchronize, function($objectA, $objectB){\r\n    ...\r\n    //return Result::unchanged();\r\n    return Result::changed($updatedObjectB);\r\n});\r\n```\r\n\r\n\r\nCredits, Copyright and License\r\n------------------------------\r\n\r\nThis project/fork was started at [webfactory GmbH, Bonn](https://www.webfactory.de) and was/will be further developed by\r\n- [h69](https://github.com/h69)\r\n\r\nCopyright 2016. Code released under [the MIT license](LICENSE).\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}